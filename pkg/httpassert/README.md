<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# httpassert

```go
import "github.com/greenbone/opensight-golang-libraries/pkg/httpassert"
```

## Index

- [Constants](<#constants>)
- [func AssertJSONCanonicalEq\(t \*testing.T, expected, actual string\) bool](<#AssertJSONCanonicalEq>)
- [func NormalizeJSON\(t \*testing.T, s string\) string](<#NormalizeJSON>)
- [type Extractor](<#Extractor>)
  - [func ExtractRegexTo\(value string, ptr any\) Extractor](<#ExtractRegexTo>)
  - [func ExtractTo\(ptr any\) Extractor](<#ExtractTo>)
- [type Matcher](<#Matcher>)
  - [func Contains\(v string\) Matcher](<#Contains>)
  - [func HasSize\(e int\) Matcher](<#HasSize>)
  - [func IsUUID\(\) Matcher](<#IsUUID>)
  - [func NotEmpty\(\) Matcher](<#NotEmpty>)
  - [func Regex\(expr string\) Matcher](<#Regex>)
- [type Request](<#Request>)
  - [func New\(t \*testing.T, router http.Handler\) Request](<#New>)
- [type Response](<#Response>)


## Constants

<a name="IgnoreJsonValue"></a>

```go
const IgnoreJsonValue = "<IGNORE>"
```

<a name="AssertJSONCanonicalEq"></a>
## func [AssertJSONCanonicalEq](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/assert.go#L32>)

```go
func AssertJSONCanonicalEq(t *testing.T, expected, actual string) bool
```

AssertJSONCanonicalEq compares two JSON strings by normalizing both first. On mismatch, it prints a readable diff of the normalized forms.

<a name="NormalizeJSON"></a>
## func [NormalizeJSON](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/assert.go#L15>)

```go
func NormalizeJSON(t *testing.T, s string) string
```

NormalizeJSON parses JSON and re\-marshals it with stable key ordering and indentation. \- Uses Decoder.UseNumber\(\) to preserve numeric fidelity \(avoid float64 surprises\).

<a name="Extractor"></a>
## type [Extractor](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/extracter.go#L16>)



```go
type Extractor func(t *testing.T, actual any) any
```

<a name="ExtractRegexTo"></a>
### func [ExtractRegexTo](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/extracter.go#L29>)

```go
func ExtractRegexTo(value string, ptr any) Extractor
```



<a name="ExtractTo"></a>
### func [ExtractTo](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/extracter.go#L23>)

```go
func ExtractTo(ptr any) Extractor
```

ExtractTo sets the value read from JSONPath into the given pointer variable. Example:

```
var id string
request.Expect().JsonPath("$.data.id", httpassert.ExtractTo(&id))
```

<a name="Matcher"></a>
## type [Matcher](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L16>)



```go
type Matcher func(t *testing.T, actual any) bool
```

<a name="Contains"></a>
### func [Contains](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L44>)

```go
func Contains(v string) Matcher
```

Contains checks if a string contains the value Example: JsonPath\("$.data.name", httpassert.Contains\("foo"\)\)

<a name="HasSize"></a>
### func [HasSize](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L20>)

```go
func HasSize(e int) Matcher
```

HasSize checks the length of arrays, maps, or strings. Example: JsonPath\("$.data", httpassert.HasSize\(11\)\)

<a name="IsUUID"></a>
### func [IsUUID](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L76>)

```go
func IsUUID() Matcher
```

IsUUID checks if a string is a UUID Example: JsonPath\("$.id", httpassert.IsUUID\(\)\)

<a name="NotEmpty"></a>
### func [NotEmpty](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L63>)

```go
func NotEmpty() Matcher
```

NotEmpty checks if a string is not empty Example: JsonPath\("$.data.name", httpassert.NotEmpty\(\)\)

<a name="Regex"></a>
### func [Regex](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/matcher.go#L53>)

```go
func Regex(expr string) Matcher
```

Regex checks if a string matches the given regular expression Example: JsonPath\("$.data.name", httpassert.Regex\("^foo.\*bar$"\)\)

<a name="Request"></a>
## type [Request](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/request.go#L26-L60>)

nolint:interfacebloat Request interface provides fluent HTTP request building.

```go
type Request interface {
    Get(path string) Request
    Getf(format string, a ...interface{}) Request
    Post(path string) Request
    Postf(format string, a ...interface{}) Request
    Put(path string) Request
    Putf(format string, a ...interface{}) Request
    Delete(path string) Request
    Deletef(format string, a ...interface{}) Request
    Options(path string) Request
    Optionsf(format string, a ...interface{}) Request
    Patch(path string) Request
    Patchf(format string, a ...interface{}) Request

    Perform(verb string, path string) Request
    Performf(verb string, path string, a ...interface{}) Request

    AuthHeader(header string) Request
    Headers(headers map[string]string) Request
    Header(key, value string) Request
    AuthJwt(jwt string) Request

    ContentType(string) Request

    Content(string) Request
    ContentFile(string) Request

    JsonContent(string) Request
    JsonContentTemplate(body string, values map[string]any) Request
    JsonContentObject(any) Request
    JsonContentFile(path string) Request

    Expect() Response
    ExpectEventually(check func(r Response), timeout time.Duration, interval time.Duration) Response
}
```

<a name="New"></a>
### func [New](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/request.go#L124>)

```go
func New(t *testing.T, router http.Handler) Request
```

New returns a new Request instance for the given router.

<a name="Response"></a>
## type [Response](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/httpassert/response.go#L24-L46>)

nolint:interfacebloat Response interface provides fluent response assertions.

```go
type Response interface {
    StatusCode(int) Response

    JsonPath(string, any) Response
    JsonPathJson(path string, expectedJson string) Response

    ContentType(contentType string) Response

    NoContent() Response

    Json(json string) Response
    JsonTemplate(json string, values map[string]any) Response
    JsonTemplateFile(path string, values map[string]any) Response
    JsonFile(path string) Response

    Header(name string, value any) Response

    Body(body string) Response
    GetJsonBodyObject(target any) Response
    GetBody() string

    Log() Response
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->