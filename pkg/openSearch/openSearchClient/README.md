<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# openSearchClient

```go
import "github.com/greenbone/opensight-golang-libraries/pkg/openSearch/openSearchClient"
```

Package openSearchClient provides a client for OpenSearch designed to allow easy mocking in tests.

Example Usage:

```
clientConfig, err := config.ReadOpensearchClientConfig()
if err != nil {
	return err
}

opensearchProjectClient, err := NewOpenSearchProjectClient(context.Background(), clientConfig)
if err != nil {
	return err
}

err = InjectAuthenticationIntoClient(openSearchProjectClient, clientConfig, nil)
if err != nil {
	return err
}

client := NewClient(opensearchProjectClient, 10, 1)

query := `{"query":{"bool":{"filter":[{"term":{"oid":{"value":"1.3.6.1.4.1.25623.1.0.117842"}}}]}}}`
responseBody, err := client.Search(indexName, []byte(query))
if err != nil {
	return err
}

searchResponse, err := UnmarshalSearchResponse[*Vulnerability](responseBody)
if err != nil {
	return err
}
```

For further usage examples see ./client\_test.go.

## Configuration

The client is configured using the following environment variables:
- `ELASTIC_HOST` (the hostname of the opensearch instance, required)
- `ELASTIC_API_PORT` (the exposed port of the opensearch instance, required)
- `ELASTIC_HTTPS` (enable https, default: `false`)
- `ELASTIC_AUTH_USER` (the username for basic auth or the client ID for openID, required)
- `ELASTIC_AUTH_PASS` (the password for basic auth or the client secret for openID, required)
- `ELASTIC_AUTH_METHOD` (the authentication method to use [`basic` | `openid`], required)

## Index

- [func GetResponseError\(statusCode int, responseString \[\]byte, indexName string\) error](<#GetResponseError>)
- [func InitializeJson\(timeFormats \[\]string\)](<#InitializeJson>)
- [func NewOpenSearchErrorWithStack\(message string\) error](<#NewOpenSearchErrorWithStack>)
- [func NewOpenSearchProjectClient\(ctx context.Context, config config.OpensearchClientConfig\) \(\*opensearch.Client, error\)](<#NewOpenSearchProjectClient>)
- [func NewOpenSearchResourceAlreadyExistsWithStack\(message string\) error](<#NewOpenSearchResourceAlreadyExistsWithStack>)
- [func NewOpenSearchResourceNotFoundWithStack\(message string\) error](<#NewOpenSearchResourceNotFoundWithStack>)
- [func SerializeDocumentsForBulkUpdate\[T any\]\(indexName string, documents \[\]T\) \(\[\]byte, error\)](<#SerializeDocumentsForBulkUpdate>)
- [func StartOpensearchTestContainer\(ctx context.Context\) \(testcontainers.Container, config.OpensearchClientConfig, error\)](<#StartOpensearchTestContainer>)
- [func Unmarshal\(data \[\]byte, v any\) error](<#Unmarshal>)
- [func UnmarshalWithoutValidation\(data \[\]byte, v any\) error](<#UnmarshalWithoutValidation>)
- [type Bucket](<#Bucket>)
  - [func \(bucket \*Bucket\) UnmarshalJSON\(bytes \[\]byte\) error](<#Bucket.UnmarshalJSON>)
- [type BulkResponse](<#BulkResponse>)
- [type Client](<#Client>)
  - [func NewClient\(openSearchProjectClient \*opensearch.Client, updateMaxRetries int, updateRetryDelay time.Duration\) \*Client](<#NewClient>)
  - [func \(c \*Client\) AsyncDeleteByQuery\(indexName string, requestBody \[\]byte\) error](<#Client.AsyncDeleteByQuery>)
  - [func \(c \*Client\) BulkUpdate\(indexName string, requestBody \[\]byte\) error](<#Client.BulkUpdate>)
  - [func \(c \*Client\) Close\(\)](<#Client.Close>)
  - [func \(c \*Client\) DeleteByQuery\(indexName string, requestBody \[\]byte\) error](<#Client.DeleteByQuery>)
  - [func \(c \*Client\) Search\(indexName string, requestBody \[\]byte\) \(responseBody \[\]byte, err error\)](<#Client.Search>)
  - [func \(c \*Client\) Update\(indexName string, requestBody \[\]byte\) \(responseBody \[\]byte, err error\)](<#Client.Update>)
- [type CreatedResponse](<#CreatedResponse>)
- [type DocumentError](<#DocumentError>)
- [type DocumentErrorType](<#DocumentErrorType>)
- [type DynamicAggregation](<#DynamicAggregation>)
- [type DynamicAggregationHits](<#DynamicAggregationHits>)
- [type IndexError](<#IndexError>)
- [type KeepJsonAsString](<#KeepJsonAsString>)
  - [func \(k \*KeepJsonAsString\) UnmarshalJSON\(data \[\]byte\) error](<#KeepJsonAsString.UnmarshalJSON>)
- [type OpenSearchError](<#OpenSearchError>)
  - [func NewOpenSearchError\(message string\) \*OpenSearchError](<#NewOpenSearchError>)
  - [func \(o \*OpenSearchError\) Error\(\) string](<#OpenSearchError.Error>)
- [type OpenSearchErrorResponse](<#OpenSearchErrorResponse>)
- [type OpenSearchErrors](<#OpenSearchErrors>)
- [type OpenSearchResourceAlreadyExists](<#OpenSearchResourceAlreadyExists>)
  - [func NewOpenSearchResourceAlreadyExists\(message string\) \*OpenSearchResourceAlreadyExists](<#NewOpenSearchResourceAlreadyExists>)
  - [func \(o \*OpenSearchResourceAlreadyExists\) Error\(\) string](<#OpenSearchResourceAlreadyExists.Error>)
- [type OpenSearchResourceNotFound](<#OpenSearchResourceNotFound>)
  - [func NewOpenSearchResourceNotFound\(message string\) \*OpenSearchResourceNotFound](<#NewOpenSearchResourceNotFound>)
  - [func \(o \*OpenSearchResourceNotFound\) Error\(\) string](<#OpenSearchResourceNotFound.Error>)
- [type OpenSearchRootCause](<#OpenSearchRootCause>)
- [type OpensearchTestContainer](<#OpensearchTestContainer>)
- [type Request](<#Request>)
- [type Response](<#Response>)
- [type SearchResponse](<#SearchResponse>)
  - [func UnmarshalSearchResponse\[T any\]\(data \[\]byte\) \(\*SearchResponse\[T\], error\)](<#UnmarshalSearchResponse>)
  - [func \(s SearchResponse\[T\]\) GetResults\(\) \[\]T](<#SearchResponse[T].GetResults>)
  - [func \(s SearchResponse\[T\]\) GetSearchHits\(\) \[\]SearchResponseHit\[T\]](<#SearchResponse[T].GetSearchHits>)
- [type SearchResponseAggregation](<#SearchResponseAggregation>)
- [type SearchResponseAggregations](<#SearchResponseAggregations>)
- [type SearchResponseHit](<#SearchResponseHit>)
- [type SearchResponseHits](<#SearchResponseHits>)
- [type SearchResponseHitsTotal](<#SearchResponseHitsTotal>)
- [type UpdateQueue](<#UpdateQueue>)
  - [func NewRequestQueue\(openSearchProjectClient \*opensearch.Client, updateMaxRetries int, updateRetryDelay time.Duration\) \*UpdateQueue](<#NewRequestQueue>)
  - [func \(q \*UpdateQueue\) Stop\(\)](<#UpdateQueue.Stop>)
  - [func \(q \*UpdateQueue\) Update\(indexName string, requestBody \[\]byte\) \(\[\]byte, error\)](<#UpdateQueue.Update>)


<a name="GetResponseError"></a>
## func [GetResponseError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L168>)

```go
func GetResponseError(statusCode int, responseString []byte, indexName string) error
```

GetResponseError checks if a response from OpenSearch indicated success and returns an error if not.

<a name="InitializeJson"></a>
## func [InitializeJson](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L18>)

```go
func InitializeJson(timeFormats []string)
```



<a name="NewOpenSearchErrorWithStack"></a>
## func [NewOpenSearchErrorWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L40>)

```go
func NewOpenSearchErrorWithStack(message string) error
```



<a name="NewOpenSearchProjectClient"></a>
## func [NewOpenSearchProjectClient](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchProjectClient.go#L25>)

```go
func NewOpenSearchProjectClient(ctx context.Context, config config.OpensearchClientConfig) (*opensearch.Client, error)
```

NewOpenSearchProjectClient creates a new official OpenSearch client \(package github.com/opensearch\-project/opensearch\-go\) for usage NewClient. It returns an error if the client couldn't be created or the connection couldn't be established.

ctx is the context to use for the connection. config is the configuration for the client.

<a name="NewOpenSearchResourceAlreadyExistsWithStack"></a>
## func [NewOpenSearchResourceAlreadyExistsWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L59>)

```go
func NewOpenSearchResourceAlreadyExistsWithStack(message string) error
```



<a name="NewOpenSearchResourceNotFoundWithStack"></a>
## func [NewOpenSearchResourceNotFoundWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L78>)

```go
func NewOpenSearchResourceNotFoundWithStack(message string) error
```



<a name="SerializeDocumentsForBulkUpdate"></a>
## func [SerializeDocumentsForBulkUpdate](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L124>)

```go
func SerializeDocumentsForBulkUpdate[T any](indexName string, documents []T) ([]byte, error)
```

SerializeDocumentsForBulkUpdate serializes documents for bulk update. Can be used in conjunction with BulkUpdate. It returns the serialized documents or an error in case something went wrong.

indexName is the name of the index to update. documents are the documents to update.

<a name="StartOpensearchTestContainer"></a>
## func [StartOpensearchTestContainer](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchTestContainer.go#L31>)

```go
func StartOpensearchTestContainer(ctx context.Context) (testcontainers.Container, config.OpensearchClientConfig, error)
```

StartOpensearchTestContainer starts a test container with opensearch and returns the container and the config for the opensearch client. It returns an error if the container couldn't be created or started.

ctx is the context to use for the container.

<a name="Unmarshal"></a>
## func [Unmarshal](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L53>)

```go
func Unmarshal(data []byte, v any) error
```

Unmarshal unmarshalls data into v. It returns an error if the data is invalid.

<a name="UnmarshalWithoutValidation"></a>
## func [UnmarshalWithoutValidation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L79>)

```go
func UnmarshalWithoutValidation(data []byte, v any) error
```

UnmarshalWithoutValidation unmarshalls data into v. It returns an error if the data can not be parsed.

<a name="Bucket"></a>
## type [Bucket](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L50-L55>)



```go
type Bucket struct {
    Key         any    `json:"key"`
    KeyAsString string `json:"key_as_string"`
    DocCount    uint   `json:"doc_count"`
    Aggs        map[string]DynamicAggregation
}
```

<a name="Bucket.UnmarshalJSON"></a>
### func \(\*Bucket\) [UnmarshalJSON](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L71>)

```go
func (bucket *Bucket) UnmarshalJSON(bytes []byte) error
```



<a name="BulkResponse"></a>
## type [BulkResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L129-L133>)

BulkResponse bulk response

```go
type BulkResponse struct {
    Took     uint         `json:"took"`
    HasError bool         `json:"errors"`
    Errors   []IndexError `json:"items"`
}
```

<a name="Client"></a>
## type [Client](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L24-L27>)

Client is a client for OpenSearch designed to allow easy mocking in tests. It is a wrapper around the official OpenSearch client github.com/opensearch\-project/opensearch\-go .

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>
### func [NewClient](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L34>)

```go
func NewClient(openSearchProjectClient *opensearch.Client, updateMaxRetries int, updateRetryDelay time.Duration) *Client
```

NewClient creates a new OpenSearch client.

openSearchProjectClient is the official OpenSearch client to wrap. Use NewOpenSearchProjectClient to create it. updateMaxRetries is the number of retries for update requests. updateRetryDelay is the delay between retries.

<a name="Client.AsyncDeleteByQuery"></a>
### func \(\*Client\) [AsyncDeleteByQuery](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L87>)

```go
func (c *Client) AsyncDeleteByQuery(indexName string, requestBody []byte) error
```

AsyncDeleteByQuery updates documents in the given index asynchronously. It does not wait for the update to finish before returning. It returns an error in case something went wrong.

indexName is the name of the index to delete from. requestBody is the request body to send to OpenSearch to identify the documents to be deleted.

<a name="Client.BulkUpdate"></a>
### func \(\*Client\) [BulkUpdate](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L149>)

```go
func (c *Client) BulkUpdate(indexName string, requestBody []byte) error
```

BulkUpdate performs a bulk update in the given index. It returns an error in case something went wrong.

indexName is the name of the index to update. requestBody is the request body to send to OpenSearch specifying the bulk update.

<a name="Client.Close"></a>
### func \(\*Client\) [Close](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L202>)

```go
func (c *Client) Close()
```

Close stops the underlying UpdateQueue allowing a graceful shutdown.

<a name="Client.DeleteByQuery"></a>
### func \(\*Client\) [DeleteByQuery](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L97>)

```go
func (c *Client) DeleteByQuery(indexName string, requestBody []byte) error
```

DeleteByQuery updates documents in the given index. It waits for the update to finish before returning. It returns an error in case something went wrong.

indexName is the name of the index to delete from. requestBody is the request body to send to OpenSearch to identify the documents to be deleted.

<a name="Client.Search"></a>
### func \(\*Client\) [Search](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L47>)

```go
func (c *Client) Search(indexName string, requestBody []byte) (responseBody []byte, err error)
```

Search searches for documents in the given index.

indexName is the name of the index to search in. requestBody is the request body to send to OpenSearch. It returns the response body as or an error in case something went wrong.

<a name="Client.Update"></a>
### func \(\*Client\) [Update](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L77>)

```go
func (c *Client) Update(indexName string, requestBody []byte) (responseBody []byte, err error)
```

Update updates documents in the given index using UpdateQueue \(which is also part of this package\). It does not wait for the update to finish before returning. It returns the response body as or an error in case something went wrong.

indexName is the name of the index to update. requestBody is the request body to send to OpenSearch specifying the update.

<a name="CreatedResponse"></a>
## type [CreatedResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L123-L126>)



```go
type CreatedResponse struct {
    Id     string `json:"_id"`
    Result string `json:"result"`
}
```

<a name="DocumentError"></a>
## type [DocumentError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L85-L91>)



```go
type DocumentError struct {
    IndexName  string            `json:"_index"`
    IndexType  string            `json:"_type"`
    DocumentId string            `json:"_id"`
    StatusCode uint              `json:"status"`
    Error      DocumentErrorType `json:"error"`
}
```

<a name="DocumentErrorType"></a>
## type [DocumentErrorType](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L93-L96>)



```go
type DocumentErrorType struct {
    Type   string `json:"type"`
    Reason string `json:"reason"`
}
```

<a name="DynamicAggregation"></a>
## type [DynamicAggregation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L85-L92>)



```go
type DynamicAggregation struct {
    DocCountErrorUpperBound int                    `json:"doc_count_error_upper_bound"`
    SumOtherDocCount        uint                   `json:"sum_other_doc_count"`
    Buckets                 []Bucket               `json:"buckets"`
    Value                   any                    `json:"value"`
    ValueAsString           any                    `json:"value_as_string"`
    Hits                    DynamicAggregationHits `json:"hits"`
}
```

<a name="DynamicAggregationHits"></a>
## type [DynamicAggregationHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L31-L34>)



```go
type DynamicAggregationHits struct {
    Total      SearchResponseHitsTotal `json:"total"`
    SearchHits KeepJsonAsString        `json:"hits"`
}
```

<a name="IndexError"></a>
## type [IndexError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L82-L84>)



```go
type IndexError struct {
    Index DocumentError `json:"index"`
}
```

<a name="KeepJsonAsString"></a>
## type [KeepJsonAsString](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L23>)



```go
type KeepJsonAsString []byte
```

<a name="KeepJsonAsString.UnmarshalJSON"></a>
### func \(\*KeepJsonAsString\) [UnmarshalJSON](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L25>)

```go
func (k *KeepJsonAsString) UnmarshalJSON(data []byte) error
```



<a name="OpenSearchError"></a>
## type [OpenSearchError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L26-L28>)

OpenSearchError openSearch error

```go
type OpenSearchError struct {
    Message string
}
```

<a name="NewOpenSearchError"></a>
### func [NewOpenSearchError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L34>)

```go
func NewOpenSearchError(message string) *OpenSearchError
```



<a name="OpenSearchError.Error"></a>
### func \(\*OpenSearchError\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L30>)

```go
func (o *OpenSearchError) Error() string
```



<a name="OpenSearchErrorResponse"></a>
## type [OpenSearchErrorResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L20-L23>)



```go
type OpenSearchErrorResponse struct {
    Error  OpenSearchErrors
    Status int
}
```

<a name="OpenSearchErrors"></a>
## type [OpenSearchErrors](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L9-L13>)



```go
type OpenSearchErrors struct {
    Reasons []OpenSearchRootCause
    Type    string
    Reason  string
}
```

<a name="OpenSearchResourceAlreadyExists"></a>
## type [OpenSearchResourceAlreadyExists](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L45-L47>)

OpenSearchResourceAlreadyExists openSearch resource already exists

```go
type OpenSearchResourceAlreadyExists struct {
    Message string
}
```

<a name="NewOpenSearchResourceAlreadyExists"></a>
### func [NewOpenSearchResourceAlreadyExists](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L53>)

```go
func NewOpenSearchResourceAlreadyExists(message string) *OpenSearchResourceAlreadyExists
```



<a name="OpenSearchResourceAlreadyExists.Error"></a>
### func \(\*OpenSearchResourceAlreadyExists\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L49>)

```go
func (o *OpenSearchResourceAlreadyExists) Error() string
```



<a name="OpenSearchResourceNotFound"></a>
## type [OpenSearchResourceNotFound](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L64-L66>)

OpenSearchResourceNotFound openSearch resource already exists

```go
type OpenSearchResourceNotFound struct {
    Message string
}
```

<a name="NewOpenSearchResourceNotFound"></a>
### func [NewOpenSearchResourceNotFound](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L72>)

```go
func NewOpenSearchResourceNotFound(message string) *OpenSearchResourceNotFound
```



<a name="OpenSearchResourceNotFound.Error"></a>
### func \(\*OpenSearchResourceNotFound\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L68>)

```go
func (o *OpenSearchResourceNotFound) Error() string
```



<a name="OpenSearchRootCause"></a>
## type [OpenSearchRootCause](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L15-L18>)



```go
type OpenSearchRootCause struct {
    Type   string
    Reason string
}
```

<a name="OpensearchTestContainer"></a>
## type [OpensearchTestContainer](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchTestContainer.go#L20-L22>)

OpensearchTestContainer represents the opensearch container

```go
type OpensearchTestContainer struct {
    testcontainers.Container
}
```

<a name="Request"></a>
## type [Request](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L26-L30>)



```go
type Request struct {
    IndexName   string
    RequestBody []byte
    Response    chan Response // Use the new Response type
}
```

<a name="Response"></a>
## type [Response](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L21-L24>)



```go
type Response struct {
    Body []byte
    Err  error
}
```

<a name="SearchResponse"></a>
## type [SearchResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L103-L108>)



```go
type SearchResponse[T any] struct {
    Took         uint                       `json:"took"`
    TimedOut     bool                       `json:"timed_out"`
    Hits         SearchResponseHits[T]      `json:"hits"`
    Aggregations SearchResponseAggregations `json:"aggregations"`
}
```

<a name="UnmarshalSearchResponse"></a>
### func [UnmarshalSearchResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L36>)

```go
func UnmarshalSearchResponse[T any](data []byte) (*SearchResponse[T], error)
```



<a name="SearchResponse[T].GetResults"></a>
### func \(SearchResponse\[T\]\) [GetResults](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L115>)

```go
func (s SearchResponse[T]) GetResults() []T
```

GetResults returns list of documents

<a name="SearchResponse[T].GetSearchHits"></a>
### func \(SearchResponse\[T\]\) [GetSearchHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L110>)

```go
func (s SearchResponse[T]) GetSearchHits() []SearchResponseHit[T]
```



<a name="SearchResponseAggregation"></a>
## type [SearchResponseAggregation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L94-L99>)



```go
type SearchResponseAggregation struct {
    DocCountErrorUpperBound int      `json:"doc_count_error_upper_bound"`
    SumOtherDocCount        uint     `json:"sum_other_doc_count"`
    Buckets                 []Bucket `json:"buckets"`
    Value                   uint64   `json:"value"`
}
```

<a name="SearchResponseAggregations"></a>
## type [SearchResponseAggregations](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L101>)



```go
type SearchResponseAggregations map[string]SearchResponseAggregation
```

<a name="SearchResponseHit"></a>
## type [SearchResponseHit](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L12-L16>)



```go
type SearchResponseHit[T any] struct {
    Id      string `json:"_id"`
    Type    string `json:"_type"`
    Content T      `json:"_source"`
}
```

<a name="SearchResponseHits"></a>
## type [SearchResponseHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L18-L21>)



```go
type SearchResponseHits[T any] struct {
    Total      SearchResponseHitsTotal
    SearchHits []SearchResponseHit[T] `json:"hits"`
}
```

<a name="SearchResponseHitsTotal"></a>
## type [SearchResponseHitsTotal](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L45-L48>)



```go
type SearchResponseHitsTotal struct {
    Value    uint
    Relation string
}
```

<a name="UpdateQueue"></a>
## type [UpdateQueue](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L33-L40>)

UpdateQueue is a queue for OpenSearch update requests.

```go
type UpdateQueue struct {
    // contains filtered or unexported fields
}
```

<a name="NewRequestQueue"></a>
### func [NewRequestQueue](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L47>)

```go
func NewRequestQueue(openSearchProjectClient *opensearch.Client, updateMaxRetries int, updateRetryDelay time.Duration) *UpdateQueue
```

NewRequestQueue creates a new update queue.

openSearchProjectClient is the official OpenSearch client to wrap. Use NewOpenSearchProjectClient to create it. updateMaxRetries is the number of retries for update requests. updateRetryDelay is the delay between retries.

<a name="UpdateQueue.Stop"></a>
### func \(\*UpdateQueue\) [Stop](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L64>)

```go
func (q *UpdateQueue) Stop()
```



<a name="UpdateQueue.Update"></a>
### func \(\*UpdateQueue\) [Update](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L79>)

```go
func (q *UpdateQueue) Update(indexName string, requestBody []byte) ([]byte, error)
```

Update queues and update for an index and returns the response body or an error

Is called from pkg/openSearch/open\_search\_client/client.go: func \(c \*Client\) Update\(indexName string, requestBody \[\]byte\) \(responseBody \[\]byte, err error\) and tested in pkg/openSearch/open\_search\_client/client\_test.go

indexName: The name of the index to update requestBody: The request body to send to the index

Returns: The response body or an error

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->

# License

Copyright (C) 2022-2023 [Greenbone AG][Greenbone AG]

Licensed under the [GNU General Public License v3.0 or later](../../../LICENSE).
