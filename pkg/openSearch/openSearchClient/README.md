<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# openSearchClient

```go
import "github.com/greenbone/opensight-golang-libraries/pkg/openSearch/openSearchClient"
```

## Index

- [func GetResponseError\(statusCode int, responseString \[\]byte, indexName string\) error](<#GetResponseError>)
- [func InitializeJson\(timeFormats \[\]string\)](<#InitializeJson>)
- [func NewOpenSearchErrorWithStack\(message string\) error](<#NewOpenSearchErrorWithStack>)
- [func NewOpenSearchProjectClient\(ctx context.Context, config config.OpensearchClientConfig\) \(\*opensearch.Client, error\)](<#NewOpenSearchProjectClient>)
- [func NewOpenSearchResourceAlreadyExistsWithStack\(message string\) error](<#NewOpenSearchResourceAlreadyExistsWithStack>)
- [func NewOpenSearchResourceNotFoundWithStack\(message string\) error](<#NewOpenSearchResourceNotFoundWithStack>)
- [func ParseUnknownFields\(bytes \[\]byte, structValue any, callback func\(iter \*jsoniter.Iterator, fieldName string, callbackExtra any\), callbackExtra any\)](<#ParseUnknownFields>)
- [func SerializeDocumentsForBulkUpdate\[T Identifiable\]\(indexName string, documents \[\]T\) \(\[\]byte, error\)](<#SerializeDocumentsForBulkUpdate>)
- [func StartOpensearchTestContainer\(ctx context.Context\) \(testcontainers.Container, config.OpensearchClientConfig, error\)](<#StartOpensearchTestContainer>)
- [func StructFields\(value any\) \[\]string](<#StructFields>)
- [func Unmarshal\(data \[\]byte, v any\) error](<#Unmarshal>)
- [func UnmarshalWithoutValidation\(data \[\]byte, v any\) error](<#UnmarshalWithoutValidation>)
- [type Bucket](<#Bucket>)
  - [func \(bucket \*Bucket\) UnmarshalJSON\(bytes \[\]byte\) error](<#Bucket.UnmarshalJSON>)
- [type BulkResponse](<#BulkResponse>)
- [type CreatedResponse](<#CreatedResponse>)
- [type DocumentError](<#DocumentError>)
- [type DocumentErrorType](<#DocumentErrorType>)
- [type DynamicAggregation](<#DynamicAggregation>)
- [type DynamicAggregationHits](<#DynamicAggregationHits>)
- [type Identifiable](<#Identifiable>)
- [type IndexError](<#IndexError>)
- [type KeepJsonAsString](<#KeepJsonAsString>)
  - [func \(k \*KeepJsonAsString\) UnmarshalJSON\(data \[\]byte\) error](<#KeepJsonAsString.UnmarshalJSON>)
- [type OpenSearchError](<#OpenSearchError>)
  - [func NewOpenSearchError\(message string\) \*OpenSearchError](<#NewOpenSearchError>)
  - [func \(o \*OpenSearchError\) Error\(\) string](<#OpenSearchError.Error>)
- [type OpenSearchErrorResponse](<#OpenSearchErrorResponse>)
- [type OpenSearchErrors](<#OpenSearchErrors>)
- [type OpenSearchResourceAlreadyExists](<#OpenSearchResourceAlreadyExists>)
  - [func NewOpenSearchResourceAlreadyExists\(message string\) \*OpenSearchResourceAlreadyExists](<#NewOpenSearchResourceAlreadyExists>)
  - [func \(o \*OpenSearchResourceAlreadyExists\) Error\(\) string](<#OpenSearchResourceAlreadyExists.Error>)
- [type OpenSearchResourceNotFound](<#OpenSearchResourceNotFound>)
  - [func NewOpenSearchResourceNotFound\(message string\) \*OpenSearchResourceNotFound](<#NewOpenSearchResourceNotFound>)
  - [func \(o \*OpenSearchResourceNotFound\) Error\(\) string](<#OpenSearchResourceNotFound.Error>)
- [type OpenSearchRootCause](<#OpenSearchRootCause>)
- [type OpensearchTestContainer](<#OpensearchTestContainer>)
- [type Request](<#Request>)
- [type Response](<#Response>)
- [type SearchResponse](<#SearchResponse>)
  - [func UnmarshalSearchResponse\[T Identifiable\]\(data \[\]byte\) \(\*SearchResponse\[T\], error\)](<#UnmarshalSearchResponse>)
  - [func \(s SearchResponse\[T\]\) GetResults\(\) \[\]T](<#SearchResponse[T].GetResults>)
  - [func \(s SearchResponse\[T\]\) GetSearchHits\(\) \[\]SearchResponseHit\[T\]](<#SearchResponse[T].GetSearchHits>)
- [type SearchResponseAggregation](<#SearchResponseAggregation>)
- [type SearchResponseAggregations](<#SearchResponseAggregations>)
- [type SearchResponseHit](<#SearchResponseHit>)
- [type SearchResponseHits](<#SearchResponseHits>)
- [type SearchResponseHitsTotal](<#SearchResponseHitsTotal>)


<a name="GetResponseError"></a>
## func [GetResponseError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L128>)

```go
func GetResponseError(statusCode int, responseString []byte, indexName string) error
```



<a name="InitializeJson"></a>
## func [InitializeJson](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L18>)

```go
func InitializeJson(timeFormats []string)
```



<a name="NewOpenSearchErrorWithStack"></a>
## func [NewOpenSearchErrorWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L40>)

```go
func NewOpenSearchErrorWithStack(message string) error
```



<a name="NewOpenSearchProjectClient"></a>
## func [NewOpenSearchProjectClient](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchProjectClient.go#L19>)

```go
func NewOpenSearchProjectClient(ctx context.Context, config config.OpensearchClientConfig) (*opensearch.Client, error)
```



<a name="NewOpenSearchResourceAlreadyExistsWithStack"></a>
## func [NewOpenSearchResourceAlreadyExistsWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L59>)

```go
func NewOpenSearchResourceAlreadyExistsWithStack(message string) error
```



<a name="NewOpenSearchResourceNotFoundWithStack"></a>
## func [NewOpenSearchResourceNotFoundWithStack](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L78>)

```go
func NewOpenSearchResourceNotFoundWithStack(message string) error
```



<a name="ParseUnknownFields"></a>
## func [ParseUnknownFields](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L105-L110>)

```go
func ParseUnknownFields(bytes []byte, structValue any, callback func(iter *jsoniter.Iterator, fieldName string, callbackExtra any), callbackExtra any)
```



<a name="SerializeDocumentsForBulkUpdate"></a>
## func [SerializeDocumentsForBulkUpdate](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/client.go#L90>)

```go
func SerializeDocumentsForBulkUpdate[T Identifiable](indexName string, documents []T) ([]byte, error)
```



<a name="StartOpensearchTestContainer"></a>
## func [StartOpensearchTestContainer](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchTestContainer.go#L22>)

```go
func StartOpensearchTestContainer(ctx context.Context) (testcontainers.Container, config.OpensearchClientConfig, error)
```



<a name="StructFields"></a>
## func [StructFields](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L85>)

```go
func StructFields(value any) []string
```



<a name="Unmarshal"></a>
## func [Unmarshal](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L52>)

```go
func Unmarshal(data []byte, v any) error
```



<a name="UnmarshalWithoutValidation"></a>
## func [UnmarshalWithoutValidation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/json.go#L77>)

```go
func UnmarshalWithoutValidation(data []byte, v any) error
```



<a name="Bucket"></a>
## type [Bucket](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L50-L55>)



```go
type Bucket struct {
    Key         any    `json:"key"`
    KeyAsString string `json:"key_as_string"`
    DocCount    uint   `json:"doc_count"`
    Aggs        map[string]DynamicAggregation
}
```

<a name="Bucket.UnmarshalJSON"></a>
### func \(\*Bucket\) [UnmarshalJSON](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L71>)

```go
func (bucket *Bucket) UnmarshalJSON(bytes []byte) error
```



<a name="BulkResponse"></a>
## type [BulkResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L129-L133>)

BulkResponse bulk response

```go
type BulkResponse struct {
    Took     uint         `json:"took"`
    HasError bool         `json:"errors"`
    Errors   []IndexError `json:"items"`
}
```

<a name="CreatedResponse"></a>
## type [CreatedResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L123-L126>)



```go
type CreatedResponse struct {
    Id     string `json:"_id"`
    Result string `json:"result"`
}
```

<a name="DocumentError"></a>
## type [DocumentError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L85-L91>)



```go
type DocumentError struct {
    IndexName  string            `json:"_index"`
    IndexType  string            `json:"_type"`
    DocumentId string            `json:"_id"`
    StatusCode uint              `json:"status"`
    Error      DocumentErrorType `json:"error"`
}
```

<a name="DocumentErrorType"></a>
## type [DocumentErrorType](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L93-L96>)



```go
type DocumentErrorType struct {
    Type   string `json:"type"`
    Reason string `json:"reason"`
}
```

<a name="DynamicAggregation"></a>
## type [DynamicAggregation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L85-L92>)



```go
type DynamicAggregation struct {
    DocCountErrorUpperBound int                    `json:"doc_count_error_upper_bound"`
    SumOtherDocCount        uint                   `json:"sum_other_doc_count"`
    Buckets                 []Bucket               `json:"buckets"`
    Value                   any                    `json:"value"`
    ValueAsString           any                    `json:"value_as_string"`
    Hits                    DynamicAggregationHits `json:"hits"`
}
```

<a name="DynamicAggregationHits"></a>
## type [DynamicAggregationHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L31-L34>)



```go
type DynamicAggregationHits struct {
    Total      SearchResponseHitsTotal `json:"total"`
    SearchHits KeepJsonAsString        `json:"hits"`
}
```

<a name="Identifiable"></a>
## type [Identifiable](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/identifiable.go#L7-L11>)



```go
type Identifiable interface {
    GetId() string

    SetId(id string)
}
```

<a name="IndexError"></a>
## type [IndexError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L82-L84>)



```go
type IndexError struct {
    Index DocumentError `json:"index"`
}
```

<a name="KeepJsonAsString"></a>
## type [KeepJsonAsString](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L23>)



```go
type KeepJsonAsString []byte
```

<a name="KeepJsonAsString.UnmarshalJSON"></a>
### func \(\*KeepJsonAsString\) [UnmarshalJSON](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L25>)

```go
func (k *KeepJsonAsString) UnmarshalJSON(data []byte) error
```



<a name="OpenSearchError"></a>
## type [OpenSearchError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L26-L28>)

OpenSearchError openSearch error

```go
type OpenSearchError struct {
    Message string
}
```

<a name="NewOpenSearchError"></a>
### func [NewOpenSearchError](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L34>)

```go
func NewOpenSearchError(message string) *OpenSearchError
```



<a name="OpenSearchError.Error"></a>
### func \(\*OpenSearchError\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L30>)

```go
func (o *OpenSearchError) Error() string
```



<a name="OpenSearchErrorResponse"></a>
## type [OpenSearchErrorResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L20-L23>)



```go
type OpenSearchErrorResponse struct {
    Error  OpenSearchErrors
    Status int
}
```

<a name="OpenSearchErrors"></a>
## type [OpenSearchErrors](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L9-L13>)



```go
type OpenSearchErrors struct {
    Reasons []OpenSearchRootCause
    Type    string
    Reason  string
}
```

<a name="OpenSearchResourceAlreadyExists"></a>
## type [OpenSearchResourceAlreadyExists](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L45-L47>)

OpenSearchResourceAlreadyExists openSearch resource already exists

```go
type OpenSearchResourceAlreadyExists struct {
    Message string
}
```

<a name="NewOpenSearchResourceAlreadyExists"></a>
### func [NewOpenSearchResourceAlreadyExists](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L53>)

```go
func NewOpenSearchResourceAlreadyExists(message string) *OpenSearchResourceAlreadyExists
```



<a name="OpenSearchResourceAlreadyExists.Error"></a>
### func \(\*OpenSearchResourceAlreadyExists\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L49>)

```go
func (o *OpenSearchResourceAlreadyExists) Error() string
```



<a name="OpenSearchResourceNotFound"></a>
## type [OpenSearchResourceNotFound](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L64-L66>)

OpenSearchResourceNotFound openSearch resource already exists

```go
type OpenSearchResourceNotFound struct {
    Message string
}
```

<a name="NewOpenSearchResourceNotFound"></a>
### func [NewOpenSearchResourceNotFound](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L72>)

```go
func NewOpenSearchResourceNotFound(message string) *OpenSearchResourceNotFound
```



<a name="OpenSearchResourceNotFound.Error"></a>
### func \(\*OpenSearchResourceNotFound\) [Error](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L68>)

```go
func (o *OpenSearchResourceNotFound) Error() string
```



<a name="OpenSearchRootCause"></a>
## type [OpenSearchRootCause](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/error.go#L15-L18>)



```go
type OpenSearchRootCause struct {
    Type   string
    Reason string
}
```

<a name="OpensearchTestContainer"></a>
## type [OpensearchTestContainer](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/opensearchTestContainer.go#L16-L18>)

Container represents the opensearch container type used in the module

```go
type OpensearchTestContainer struct {
    testcontainers.Container
}
```

<a name="Request"></a>
## type [Request](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L22-L26>)



```go
type Request struct {
    IndexName   string
    RequestBody []byte
    Response    chan Response // Use the new Response type
}
```

<a name="Response"></a>
## type [Response](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/updateQueue.go#L17-L20>)



```go
type Response struct {
    Body []byte
    Err  error
}
```

<a name="SearchResponse"></a>
## type [SearchResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L103-L108>)



```go
type SearchResponse[T Identifiable] struct {
    Took         uint                       `json:"took"`
    TimedOut     bool                       `json:"timed_out"`
    Hits         SearchResponseHits[T]      `json:"hits"`
    Aggregations SearchResponseAggregations `json:"aggregations"`
}
```

<a name="UnmarshalSearchResponse"></a>
### func [UnmarshalSearchResponse](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L36>)

```go
func UnmarshalSearchResponse[T Identifiable](data []byte) (*SearchResponse[T], error)
```



<a name="SearchResponse[T].GetResults"></a>
### func \(SearchResponse\[T\]\) [GetResults](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L115>)

```go
func (s SearchResponse[T]) GetResults() []T
```

GetResults returns list of documents

<a name="SearchResponse[T].GetSearchHits"></a>
### func \(SearchResponse\[T\]\) [GetSearchHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L110>)

```go
func (s SearchResponse[T]) GetSearchHits() []SearchResponseHit[T]
```



<a name="SearchResponseAggregation"></a>
## type [SearchResponseAggregation](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L94-L99>)



```go
type SearchResponseAggregation struct {
    DocCountErrorUpperBound int      `json:"doc_count_error_upper_bound"`
    SumOtherDocCount        uint     `json:"sum_other_doc_count"`
    Buckets                 []Bucket `json:"buckets"`
    Value                   uint64   `json:"value"`
}
```

<a name="SearchResponseAggregations"></a>
## type [SearchResponseAggregations](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L101>)



```go
type SearchResponseAggregations map[string]SearchResponseAggregation
```

<a name="SearchResponseHit"></a>
## type [SearchResponseHit](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L12-L16>)



```go
type SearchResponseHit[T Identifiable] struct {
    Id      string `json:"_id"`
    Type    string `json:"_type"`
    Content T      `json:"_source"`
}
```

<a name="SearchResponseHits"></a>
## type [SearchResponseHits](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L18-L21>)



```go
type SearchResponseHits[T Identifiable] struct {
    Total      SearchResponseHitsTotal
    SearchHits []SearchResponseHit[T] `json:"hits"`
}
```

<a name="SearchResponseHitsTotal"></a>
## type [SearchResponseHitsTotal](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/openSearch/openSearchClient/response.go#L45-L48>)



```go
type SearchResponseHitsTotal struct {
    Value    uint
    Relation string
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->

# License

Copyright (C) 2022-2023 [Greenbone AG][Greenbone AG]

Licensed under the [GNU General Public License v3.0 or later](../../../LICENSE).