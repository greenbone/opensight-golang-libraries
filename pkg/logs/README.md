<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# logs

```go
import "github.com/greenbone/opensight-golang-libraries/pkg/logs"
```

Package logs provides a thin wrapper around the zerolog logging library, enabling structured, context logging across an application.

It includes:

- Setting the global logging level.
- Extracting loggers from context, with fallback to the global logger.
- Attaching metadata \(e.g., job name, correlation IDs\) to loggers via context.

This package ensures consistent logging behavior and makes it easy to trace log output using structured fields like correlation IDs, even across goroutines or services.

## Index

- [Constants](<#constants>)
- [func Ctx\(ctx context.Context\) \*zerolog.Logger](<#Ctx>)
- [func SetupLogger\(logLevel string\) error](<#SetupLogger>)
- [func WithCorrelationID\(ctx context.Context, correlationID string\) context.Context](<#WithCorrelationID>)
- [func WithCtxField\(ctx context.Context, key, value string\) context.Context](<#WithCtxField>)
- [func WithJob\(ctx context.Context, jobName string\) context.Context](<#WithJob>)
- [func WithNewCorrelationID\(ctx context.Context\) context.Context](<#WithNewCorrelationID>)


## Constants

<a name="AllowedLogLevels"></a>

```go
const (
    AllowedLogLevels string = "disabled|trace|debug|info|warn|error|fatal|panic"
)
```

<a name="Ctx"></a>
## func [Ctx](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L77>)

```go
func Ctx(ctx context.Context) *zerolog.Logger
```

Ctx retrieves the zerolog logger from the given context.

If the context does not have a logger attached, zerolog.Ctx\(ctx\) returns a disabled logger. In such cases, this function returns the global logger instead.

This ensures that a valid logger is always returned, preventing logging from being silently disabled.

Parameters:

- ctx: the context from which to retrieve the logger.

Returns:

- \*zerolog.Logger: the logger extracted from the context, or the global logger if none is found.

Example:

```
logger := Ctx(r.Context())
logger.Info().Msg("request received")
```

<a name="SetupLogger"></a>
## func [SetupLogger](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L50>)

```go
func SetupLogger(logLevel string) error
```

SetupLogger configures the global log level for the zerolog logger.

It takes a string \`logLevel\` representing the desired logging level \(e.g. "debug", "info", "warn"\). If the provided log level is invalid, it returns an error including the list of allowed levels.

Parameters:

- logLevel: a string indicating the desired log verbosity level.

Returns:

- error: if the log level cannot be parsed, an error is returned; otherwise, nil.

Example:

```
err := SetupLogger("info")
if err != nil {
    log.Fatal(err)
}
```

<a name="WithCorrelationID"></a>
## func [WithCorrelationID](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L125>)

```go
func WithCorrelationID(ctx context.Context, correlationID string) context.Context
```

WithCorrelationID adds a correlation ID to the logger in the context and returns the updated context.

Useful for tracing requests across services or components.

<a name="WithCtxField"></a>
## func [WithCtxField](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L103>)

```go
func WithCtxField(ctx context.Context, key, value string) context.Context
```

WithCtxField adds a key\-value pair to the logger in the given context and returns the updated context.

If the context does not contain a logger, a new logger with the key\-value pair is created and attached to the context.

Parameters:

- ctx: the context to enrich with the key\-value field.
- key: the field key to add to the logger.
- value: the field value to add to the logger.

Returns:

- context.Context: the updated context containing the enriched logger.

Example:

```
ctx = WithCtxField(ctx, "request_id", "abc123")
```

<a name="WithJob"></a>
## func [WithJob](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L118>)

```go
func WithJob(ctx context.Context, jobName string) context.Context
```

WithJob adds a job name field to the logger in the context and returns the updated context.

Internally calls WithCtxField with the appropriate key.

<a name="WithNewCorrelationID"></a>
## func [WithNewCorrelationID](<https://github.com/greenbone/opensight-golang-libraries/blob/main/pkg/logs/logs.go#L133>)

```go
func WithNewCorrelationID(ctx context.Context) context.Context
```

WithNewCorrelationID generates a new correlation ID, adds it to the logger in the context, and returns the updated context.

This is useful for initiating a trace when handling a new incoming request or job.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->