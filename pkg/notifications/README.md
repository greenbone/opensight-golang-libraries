<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# notifications

```go
import "github.com/greenbone/opensight-golang-libraries/pkg/notifications"
```

Package Notifications provides a client to communicate with the OpenSight Notification Service [github.com/greenbone/opensight\\\-notification\\\-service](<https://pkg.go.dev/github.com/greenbone/opensight-notification-service/>)

## Index

- [type Client](<#Client>)
  - [func NewClient\(httpClient \*http.Client, config Config, authentication KeycloakAuthentication\) \*Client](<#NewClient>)
  - [func \(c \*Client\) CreateNotification\(ctx context.Context, notification Notification\) error](<#Client.CreateNotification>)
  - [func \(c \*Client\) GetAuthenticationToken\(ctx context.Context\) \(string, error\)](<#Client.GetAuthenticationToken>)
- [type Config](<#Config>)
- [type KeycloakAuthentication](<#KeycloakAuthentication>)
- [type Level](<#Level>)
- [type Notification](<#Notification>)


<a name="Client"></a>
## type Client

Client can be used to send notifications

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>
### func NewClient

```go
func NewClient(httpClient *http.Client, config Config, authentication KeycloakAuthentication) *Client
```

NewClient returns a new [Client](<#Client>) with the notification service address \(host:port\) set. As httpClient you can use e.g. \[http.DefaultClient\].

<a name="Client.CreateNotification"></a>
### func \(\*Client\) CreateNotification

```go
func (c *Client) CreateNotification(ctx context.Context, notification Notification) error
```

CreateNotification sends a notification to the notification service. It is retried up to the configured number of retries with an exponential backoff, So it can take some time until the functions returns.

<a name="Client.GetAuthenticationToken"></a>
### func \(\*Client\) GetAuthenticationToken

```go
func (c *Client) GetAuthenticationToken(ctx context.Context) (string, error)
```

GetAuthenticationToken retrieves an authentication token using client credentials. It constructs a form\-encoded request, sends it with retry logic, and parses the response.

<a name="Config"></a>
## type Config

Config configures the notification service client

```go
type Config struct {
    Address      string
    MaxRetries   int
    RetryWaitMin time.Duration
    RetryWaitMax time.Duration
}
```

<a name="KeycloakAuthentication"></a>
## type KeycloakAuthentication

KeycloakAuthentication holds the credentials and configuration details required for Keycloak authentication in the notification service.

```go
type KeycloakAuthentication struct {
    ClientID      string
    Username      string
    Password      string
    AuthURL       string
    KeycloakRealm string
}
```

<a name="Level"></a>
## type Level

Level describes the severity of the notification

```go
type Level string
```

<a name="LevelInfo"></a>

```go
const (
    LevelInfo    Level = "info"
    LevelWarning Level = "warning"
    LevelError   Level = "error"
)
```

<a name="Notification"></a>
## type Notification



```go
type Notification struct {
    // omit property `Id` here, as it is read only
    Origin       string
    OriginUri    string    // can be used to provide a link to the origin
    Timestamp    time.Time // client will set timestamp if not set
    Title        string    // can also be seen as the 'type'
    Detail       string
    Level        Level
    CustomFields map[string]any // can contain arbitrary structured information about the notification
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->